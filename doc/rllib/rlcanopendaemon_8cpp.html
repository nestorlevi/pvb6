<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rllib: rlcanopendaemon.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rllib
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rlcanopendaemon.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="rlcanopendaemon_8h_source.html">rlcanopendaemon.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for rlcanopendaemon.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="rlcanopendaemon_8cpp__incl.png" border="0" usemap="#rlcanopendaemon_8cpp" alt=""/></div>
<map name="rlcanopendaemon_8cpp" id="rlcanopendaemon_8cpp">
<area shape="rect" id="node2" href="rlcanopendaemon_8h.html" title="rlcanopendaemon.h" alt="" coords="688,80,829,107"/>
<area shape="rect" id="node6" href="rlthread_8h.html" title="rlthread.h" alt="" coords="363,379,440,405"/>
<area shape="rect" id="node10" href="rlwthread_8h.html" title="rlwthread.h" alt="" coords="302,453,389,480"/>
<area shape="rect" id="node13" href="rlcutil_8h.html" title="rlcutil.h" alt="" coords="2121,155,2183,181"/>
<area shape="rect" id="node18" href="rlsocket_8h.html" title="rlsocket.h" alt="" coords="158,379,237,405"/>
<area shape="rect" id="node22" href="rlcanopen_8h.html" title="rlcanopen.h" alt="" coords="1044,155,1135,181"/>
<area shape="rect" id="node7" href="rldefine_8h.html" title="rldefine.h" alt="" coords="537,528,613,555"/>
<area shape="rect" id="node19" href="rlstring_8h.html" title="rlstring.h" alt="" coords="617,453,687,480"/>
<area shape="rect" id="node23" href="rlcannode_8h.html" title="rlcannode.h" alt="" coords="1043,229,1135,256"/>
<area shape="rect" id="node29" href="rlcanopenstructs_8h.html" title="rlcanopenstructs.h" alt="" coords="1453,304,1582,331"/>
<area shape="rect" id="node30" href="rlcanopentypes_8h.html" title="rlcanopentypes.h" alt="" coords="1657,304,1780,331"/>
<area shape="rect" id="node31" href="rlinifile_8h.html" title="rlinifile.h" alt="" coords="943,379,1012,405"/>
</map>
</div>
</div>
<p><a href="rlcanopendaemon_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a51ba1765537b52ff4795f6ef0424c690"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a51ba1765537b52ff4795f6ef0424c690">sdo_read</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:a51ba1765537b52ff4795f6ef0424c690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addf026270ccb455ee80506d5126ca7a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#addf026270ccb455ee80506d5126ca7a9">sdo_write</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:addf026270ccb455ee80506d5126ca7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71b281a73ea060f938e95273f4ddaa1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#af71b281a73ea060f938e95273f4ddaa1">pdo_receive</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:af71b281a73ea060f938e95273f4ddaa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d493df597bef31c9bc2654f4bf7d686"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a3d493df597bef31c9bc2654f4bf7d686">pdo_transmit</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:a3d493df597bef31c9bc2654f4bf7d686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b08553e4d75c2dc274c9e0f293beab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a75b08553e4d75c2dc274c9e0f293beab">nmt_transmit</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:a75b08553e4d75c2dc274c9e0f293beab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49104ffe6f20c359102f1912dddc2fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#ac49104ffe6f20c359102f1912dddc2fe">restart_board</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:ac49104ffe6f20c359102f1912dddc2fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2f8b22b9767bc7b85e24232fcaa76a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a4d2f8b22b9767bc7b85e24232fcaa76a">getNodeState</a> (<a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *_daemonptr, <a class="el" href="classrlSocket.html">rlSocket</a> *_socket, <a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *_message)</td></tr>
<tr class="separator:a4d2f8b22b9767bc7b85e24232fcaa76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78046224bc0729596e1af0c721acad79"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a78046224bc0729596e1af0c721acad79">clientconnection</a> (void *arg)</td></tr>
<tr class="separator:a78046224bc0729596e1af0c721acad79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f85429028b201fd3ae153c19073e5ac"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rlcanopendaemon_8cpp.html#a5f85429028b201fd3ae153c19073e5ac">listenerthread</a> (void *arg)</td></tr>
<tr class="separator:a5f85429028b201fd3ae153c19073e5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a78046224bc0729596e1af0c721acad79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78046224bc0729596e1af0c721acad79">&#9670;&nbsp;</a></span>clientconnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* clientconnection </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>handels a new client connection established by listener thread. Saves socket descriptor in new socket object. Runs a loop which reads IPCMSGSTRUCTs containing client requests and calls appropiate handler functions which communicate with the canopen device and send answers back to the client. clientconnection Thread is terminated when client disconnects. </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00172">172</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">//cout&lt;&lt;&quot;\n client connection established...\n&quot;;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  </div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="structTHREAD__PARAM.html">THREAD_PARAM</a> *p = (<a class="code" href="structTHREAD__PARAM.html">THREAD_PARAM</a> *) arg;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="structTHREADTRANSFER.html">THREADTRANSFER</a> *tr = (<a class="code" href="structTHREADTRANSFER.html">THREADTRANSFER</a>*)p-&gt;<a class="code" href="structTHREAD__PARAM.html#abb08567308ed25b8bd3329ae84279b3d">user</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> message;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">int</span> socketdescr = tr-&gt;<a class="code" href="structTHREADTRANSFER.html#a030472e2b2f26d19e79a38a6597d4f60">socketdescr</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *daemonptr = tr-&gt;<a class="code" href="structTHREADTRANSFER.html#a2d180c880175d6b3d4a98ad5114d6baf">daemonptr</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="classrlSocket.html">rlSocket</a> socket(socketdescr);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  </div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;client connection established...\n&quot;</span>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">while</span>(socket.isConnected())</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    ret = socket.read((<span class="keywordtype">void</span>*) &amp;message, <span class="keyword">sizeof</span>(message));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span>(ret &lt;= 0) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613">MSG_SDO_READ</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#a51ba1765537b52ff4795f6ef0424c690">sdo_read</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730">MSG_SDO_WRITE</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#addf026270ccb455ee80506d5126ca7a9">sdo_write</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270">MSG_PDO_RECEIVE</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#af71b281a73ea060f938e95273f4ddaa1">pdo_receive</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#a3d493df597bef31c9bc2654f4bf7d686">pdo_transmit</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ad29f36968c8e7abcbc93a045777c806e">MSG_NMT_TRANSMIT</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#a75b08553e4d75c2dc274c9e0f293beab">nmt_transmit</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ab5afb59ae93d7d1d5e55f529b7fd37a2">MSG_RESTART_BOARD</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#ac49104ffe6f20c359102f1912dddc2fe">restart_board</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> ((message.msgtype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef">MSG_GET_NODE_STATE</a>)&amp;&amp;(message.transfertype==<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a>)){</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="rlcanopendaemon_8cpp.html#a4d2f8b22b9767bc7b85e24232fcaa76a">getNodeState</a>(daemonptr, &amp;socket, &amp;message);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }    </div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    </div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;client disconnect...\n&quot;</span>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">//cout&lt;&lt;&quot;\n client disconnect...\n&quot;;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="rlcutil_8cpp_html_a5380bd2e87ffcf0c8a24c387b0ac7b7b"><div class="ttname"><a href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a></div><div class="ttdeci">int rlDebugPrintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="rlcutil_8cpp_source.html#l00061">rlcutil.cpp:61</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00037">rlcanopendaemon.h:37</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html"><div class="ttname"><a href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a></div><div class="ttdoc">the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00389">rlcanopentypes.h:389</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html"><div class="ttname"><a href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a></div><div class="ttdoc">canopen tcp/ip interface for concurrent device-access of multiple clientprocesses ...</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00051">rlcanopendaemon.h:51</a></div></div>
<div class="ttc" id="structTHREAD__PARAM_html_abb08567308ed25b8bd3329ae84279b3d"><div class="ttname"><a href="structTHREAD__PARAM.html#abb08567308ed25b8bd3329ae84279b3d">THREAD_PARAM::user</a></div><div class="ttdeci">void * user</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8h_source.html#l00030">rlthread.h:30</a></div></div>
<div class="ttc" id="classrlSocket_html"><div class="ttname"><a href="classrlSocket.html">rlSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8h_source.html#l00046">rlsocket.h:46</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_af71b281a73ea060f938e95273f4ddaa1"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#af71b281a73ea060f938e95273f4ddaa1">pdo_receive</a></div><div class="ttdeci">void pdo_receive(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00058">rlcanopendaemon.cpp:58</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_ac49104ffe6f20c359102f1912dddc2fe"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#ac49104ffe6f20c359102f1912dddc2fe">restart_board</a></div><div class="ttdeci">void restart_board(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00134">rlcanopendaemon.cpp:134</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_a4d2f8b22b9767bc7b85e24232fcaa76a"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#a4d2f8b22b9767bc7b85e24232fcaa76a">getNodeState</a></div><div class="ttdeci">void getNodeState(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00149">rlcanopendaemon.cpp:149</a></div></div>
<div class="ttc" id="structTHREAD__PARAM_html"><div class="ttname"><a href="structTHREAD__PARAM.html">THREAD_PARAM</a></div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8h_source.html#l00027">rlthread.h:27</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1ab5afb59ae93d7d1d5e55f529b7fd37a2"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ab5afb59ae93d7d1d5e55f529b7fd37a2">MSG_RESTART_BOARD</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00039">rlcanopendaemon.h:39</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html"><div class="ttname"><a href="structTHREADTRANSFER.html">THREADTRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00089">rlcanopendaemon.h:89</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_a75b08553e4d75c2dc274c9e0f293beab"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#a75b08553e4d75c2dc274c9e0f293beab">nmt_transmit</a></div><div class="ttdeci">void nmt_transmit(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00118">rlcanopendaemon.cpp:118</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_a51ba1765537b52ff4795f6ef0424c690"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#a51ba1765537b52ff4795f6ef0424c690">sdo_read</a></div><div class="ttdeci">void sdo_read(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00021">rlcanopendaemon.cpp:21</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_addf026270ccb455ee80506d5126ca7a9"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#addf026270ccb455ee80506d5126ca7a9">sdo_write</a></div><div class="ttdeci">void sdo_write(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00039">rlcanopendaemon.cpp:39</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613">MSG_SDO_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00032">rlcanopendaemon.h:32</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html_a2d180c880175d6b3d4a98ad5114d6baf"><div class="ttname"><a href="structTHREADTRANSFER.html#a2d180c880175d6b3d4a98ad5114d6baf">THREADTRANSFER::daemonptr</a></div><div class="ttdeci">rlCanOpenDaemon * daemonptr</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00092">rlcanopendaemon.h:92</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_a3d493df597bef31c9bc2654f4bf7d686"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#a3d493df597bef31c9bc2654f4bf7d686">pdo_transmit</a></div><div class="ttdeci">void pdo_transmit(rlCanOpenDaemon *_daemonptr, rlSocket *_socket, IPCMSGSTRUCT *_message)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00088">rlcanopendaemon.cpp:88</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270">MSG_PDO_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00034">rlcanopendaemon.h:34</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1accbcc63bbba40481a04d655b0a97e359">MSG_SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00030">rlcanopendaemon.h:30</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730">MSG_SDO_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00033">rlcanopendaemon.h:33</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html_a030472e2b2f26d19e79a38a6597d4f60"><div class="ttname"><a href="structTHREADTRANSFER.html#a030472e2b2f26d19e79a38a6597d4f60">THREADTRANSFER::socketdescr</a></div><div class="ttdeci">int socketdescr</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00091">rlcanopendaemon.h:91</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1ad29f36968c8e7abcbc93a045777c806e"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ad29f36968c8e7abcbc93a045777c806e">MSG_NMT_TRANSMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00038">rlcanopendaemon.h:38</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef">MSG_GET_NODE_STATE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00040">rlcanopendaemon.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d2f8b22b9767bc7b85e24232fcaa76a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2f8b22b9767bc7b85e24232fcaa76a">&#9670;&nbsp;</a></span>getNodeState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getNodeState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a getNodeState command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00149">149</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                         {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">int</span> returnvalue;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  cifmsg.<a class="code" href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">getIpcMsg</a>(*_message);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#aef2160067fb768dc63c038fa0abc0f4d">getNodeState</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                cifmsg);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  *_message = cifmsg.<a class="code" href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">createIpcMsg</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef">MSG_GET_NODE_STATE</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=returnvalue;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_a9f3e044c60558bd0de010434241c9824"><div class="ttname"><a href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">rlCanOpenTypes::getIpcMsg</a></div><div class="ttdeci">void getIpcMsg(IPCMSGSTRUCT _myIpcMsg)</div><div class="ttdoc">overwrites all data with IPCMSGSTRUCT data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00471">rlcanopentypes.cpp:471</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_af59141fc2073831833333cd48214d878"><div class="ttname"><a href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">rlCanOpenTypes::createIpcMsg</a></div><div class="ttdeci">IPCMSGSTRUCT createIpcMsg()</div><div class="ttdoc">returns a IPCMSGSTRUCT filled with current object data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00451">rlcanopentypes.cpp:451</a></div></div>
<div class="ttc" id="classrlCanOpen_html_aef2160067fb768dc63c038fa0abc0f4d"><div class="ttname"><a href="classrlCanOpen.html#aef2160067fb768dc63c038fa0abc0f4d">rlCanOpen::getNodeState</a></div><div class="ttdeci">int getNodeState(int _boardnr, int _nodeid, rlCanOpenTypes &amp;_data)</div><div class="ttdoc">use this function to get information about a specific node </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l01045">rlcanopen.cpp:1045</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a1e3fa595af5b0fd8f36cd19503a982ef">MSG_GET_NODE_STATE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00040">rlcanopendaemon.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f85429028b201fd3ae153c19073e5ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f85429028b201fd3ae153c19073e5ac">&#9670;&nbsp;</a></span>listenerthread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* listenerthread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>listenerthread waits for incoming client connections on the confugured port and spawns a new clientthread for each of them. </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00221">221</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// socketdescriptor;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordtype">int</span> socketdescr;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// parameter struct for accessing function parameters</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="structTHREAD__PARAM.html">THREAD_PARAM</a> *p = (<a class="code" href="structTHREAD__PARAM.html">THREAD_PARAM</a> *) arg;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// new parameter struct for passing parameters to handler thread</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="structTHREADTRANSFER.html">THREADTRANSFER</a> tr;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *daemonptr = (<a class="code" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a>*) p-&gt;<a class="code" href="structTHREAD__PARAM.html#abb08567308ed25b8bd3329ae84279b3d">user</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  tr.<a class="code" href="structTHREADTRANSFER.html#a2d180c880175d6b3d4a98ad5114d6baf">daemonptr</a> = daemonptr;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">int</span> port = daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a2700fe9d6dbf7950319ef744b391a527">getPort</a>();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// wait for connections with accept();</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\n starting listener on port %d...\n&quot;</span>, port);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// initialize socket with daemonport</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="classrlSocket.html">rlSocket</a> s(<span class="stringliteral">&quot;localhost&quot;</span>,port,0);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// listener main loop</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">while</span>(1){</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    socketdescr = s.connect();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span>(socketdescr == -1) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    tr.<a class="code" href="structTHREADTRANSFER.html#a030472e2b2f26d19e79a38a6597d4f60">socketdescr</a> = socketdescr;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a2e26bec1d1bc3bc35a3c8a1c9930f2fb">create</a>(<a class="code" href="rlcanopendaemon_8cpp.html#a78046224bc0729596e1af0c721acad79">clientconnection</a>, &amp;tr);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// wait for clientconnection to save socketdescriptor</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a>(100); </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a>(<span class="stringliteral">&quot;\n killing listener...\n&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="rlcutil_8cpp_html_a5380bd2e87ffcf0c8a24c387b0ac7b7b"><div class="ttname"><a href="rlcutil_8cpp.html#a5380bd2e87ffcf0c8a24c387b0ac7b7b">rlDebugPrintf</a></div><div class="ttdeci">int rlDebugPrintf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="rlcutil_8cpp_source.html#l00061">rlcutil.cpp:61</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html"><div class="ttname"><a href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a></div><div class="ttdoc">canopen tcp/ip interface for concurrent device-access of multiple clientprocesses ...</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00051">rlcanopendaemon.h:51</a></div></div>
<div class="ttc" id="structTHREAD__PARAM_html_abb08567308ed25b8bd3329ae84279b3d"><div class="ttname"><a href="structTHREAD__PARAM.html#abb08567308ed25b8bd3329ae84279b3d">THREAD_PARAM::user</a></div><div class="ttdeci">void * user</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8h_source.html#l00030">rlthread.h:30</a></div></div>
<div class="ttc" id="classrlSocket_html"><div class="ttname"><a href="classrlSocket.html">rlSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8h_source.html#l00046">rlsocket.h:46</a></div></div>
<div class="ttc" id="structTHREAD__PARAM_html"><div class="ttname"><a href="structTHREAD__PARAM.html">THREAD_PARAM</a></div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8h_source.html#l00027">rlthread.h:27</a></div></div>
<div class="ttc" id="rlcanopendaemon_8cpp_html_a78046224bc0729596e1af0c721acad79"><div class="ttname"><a href="rlcanopendaemon_8cpp.html#a78046224bc0729596e1af0c721acad79">clientconnection</a></div><div class="ttdeci">static void * clientconnection(void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00172">rlcanopendaemon.cpp:172</a></div></div>
<div class="ttc" id="classrlThread_html_a2e26bec1d1bc3bc35a3c8a1c9930f2fb"><div class="ttname"><a href="classrlThread.html#a2e26bec1d1bc3bc35a3c8a1c9930f2fb">rlThread::create</a></div><div class="ttdeci">int create(void *(*func)(void *), void *argument)</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00035">rlthread.cpp:35</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html"><div class="ttname"><a href="structTHREADTRANSFER.html">THREADTRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00089">rlcanopendaemon.h:89</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html_a2d180c880175d6b3d4a98ad5114d6baf"><div class="ttname"><a href="structTHREADTRANSFER.html#a2d180c880175d6b3d4a98ad5114d6baf">THREADTRANSFER::daemonptr</a></div><div class="ttdeci">rlCanOpenDaemon * daemonptr</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00092">rlcanopendaemon.h:92</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_a2700fe9d6dbf7950319ef744b391a527"><div class="ttname"><a href="classrlCanOpenDaemon.html#a2700fe9d6dbf7950319ef744b391a527">rlCanOpenDaemon::getPort</a></div><div class="ttdeci">int getPort()</div><div class="ttdoc">returns value of current port </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8cpp_source.html#l00280">rlcanopendaemon.cpp:280</a></div></div>
<div class="ttc" id="rlwthread_8cpp_html_a604b0dba29427e3514cd37136458e0c5"><div class="ttname"><a href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a></div><div class="ttdeci">void rlsleep(long msec)</div><div class="ttdef"><b>Definition:</b> <a href="rlwthread_8cpp_source.html#l00396">rlwthread.cpp:396</a></div></div>
<div class="ttc" id="structTHREADTRANSFER_html_a030472e2b2f26d19e79a38a6597d4f60"><div class="ttname"><a href="structTHREADTRANSFER.html#a030472e2b2f26d19e79a38a6597d4f60">THREADTRANSFER::socketdescr</a></div><div class="ttdeci">int socketdescr</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00091">rlcanopendaemon.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75b08553e4d75c2dc274c9e0f293beab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b08553e4d75c2dc274c9e0f293beab">&#9670;&nbsp;</a></span>nmt_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nmt_transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a nmt_transmit command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00118">118</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                         {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">char</span> returnvalue;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#a3b59ba388442d8ccf33f0f031752f6cd">sendNMTCommand</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a85d3f9a8ebeece22a414750acb5906d6">mtext</a>[0]);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=returnvalue;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00037">rlcanopendaemon.h:37</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a85d3f9a8ebeece22a414750acb5906d6"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a85d3f9a8ebeece22a414750acb5906d6">IPCMSGSTRUCT::mtext</a></div><div class="ttdeci">char mtext[247]</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00417">rlcanopentypes.h:417</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="classrlCanOpen_html_a3b59ba388442d8ccf33f0f031752f6cd"><div class="ttname"><a href="classrlCanOpen.html#a3b59ba388442d8ccf33f0f031752f6cd">rlCanOpen::sendNMTCommand</a></div><div class="ttdeci">int sendNMTCommand(int _boardnr, int _nodeid, unsigned char _cmd)</div><div class="ttdoc">send a NMT Command to one or all nodes (of one board) </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l01132">rlcanopen.cpp:1132</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af71b281a73ea060f938e95273f4ddaa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71b281a73ea060f938e95273f4ddaa1">&#9670;&nbsp;</a></span>pdo_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pdo_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a pdo_receive command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00058">58</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                        {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordtype">int</span> returnvalue;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  cifmsg.<a class="code" href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">getIpcMsg</a>(*_message);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">mappingid</a>==-1){</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">pdo_receive</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">pdoid</a>, </div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                cifmsg);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">pdo_receive</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">pdoid</a>, </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">mappingid</a>, </div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                                cifmsg);  </div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  *_message = cifmsg.<a class="code" href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">createIpcMsg</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270">MSG_PDO_RECEIVE</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=returnvalue;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_a9f3e044c60558bd0de010434241c9824"><div class="ttname"><a href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">rlCanOpenTypes::getIpcMsg</a></div><div class="ttdeci">void getIpcMsg(IPCMSGSTRUCT _myIpcMsg)</div><div class="ttdoc">overwrites all data with IPCMSGSTRUCT data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00471">rlcanopentypes.cpp:471</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_af538071d5478f764a4782d39481ad5c6"><div class="ttname"><a href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">IPCMSGSTRUCT::pdoid</a></div><div class="ttdeci">long pdoid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00414">rlcanopentypes.h:414</a></div></div>
<div class="ttc" id="classrlCanOpen_html_a73a3479ae9754495e17aa6591dbf135e"><div class="ttname"><a href="classrlCanOpen.html#a73a3479ae9754495e17aa6591dbf135e">rlCanOpen::pdo_receive</a></div><div class="ttdeci">int pdo_receive(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)</div><div class="ttdoc">using the pdo_receive function you can receive a mapped object within PDO </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l00544">rlcanopen.cpp:544</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aed25748dde8a23b3527427ecf7d3f2e2"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">IPCMSGSTRUCT::mappingid</a></div><div class="ttdeci">long mappingid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00415">rlcanopentypes.h:415</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1ae1f1be64e42d6e3a25c010e1dd335270">MSG_PDO_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00034">rlcanopendaemon.h:34</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_af59141fc2073831833333cd48214d878"><div class="ttname"><a href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">rlCanOpenTypes::createIpcMsg</a></div><div class="ttdeci">IPCMSGSTRUCT createIpcMsg()</div><div class="ttdoc">returns a IPCMSGSTRUCT filled with current object data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00451">rlcanopentypes.cpp:451</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d493df597bef31c9bc2654f4bf7d686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d493df597bef31c9bc2654f4bf7d686">&#9670;&nbsp;</a></span>pdo_transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pdo_transmit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a pdo_transmit command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00088">88</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                         {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordtype">int</span> returnvalue;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  cifmsg.<a class="code" href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">getIpcMsg</a>(*_message);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> (_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">mappingid</a>==-1){</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">pdo_transmit</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">pdoid</a>, </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                  cifmsg);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">pdo_transmit</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">pdoid</a>, </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">mappingid</a>, </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                                  cifmsg);  </div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  *_message = cifmsg.<a class="code" href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">createIpcMsg</a>();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=returnvalue;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00037">rlcanopendaemon.h:37</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_a9f3e044c60558bd0de010434241c9824"><div class="ttname"><a href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">rlCanOpenTypes::getIpcMsg</a></div><div class="ttdeci">void getIpcMsg(IPCMSGSTRUCT _myIpcMsg)</div><div class="ttdoc">overwrites all data with IPCMSGSTRUCT data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00471">rlcanopentypes.cpp:471</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="classrlCanOpen_html_aa0af0f6576ec284128e9c3efb4770ca2"><div class="ttname"><a href="classrlCanOpen.html#aa0af0f6576ec284128e9c3efb4770ca2">rlCanOpen::pdo_transmit</a></div><div class="ttdeci">int pdo_transmit(int _boardnr, int _nodeid, int _pdonr, int _mappingnr, rlCanOpenTypes &amp;_pdo_data)</div><div class="ttdoc">transmit a mapped object within a PDO to a specific node </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l00703">rlcanopen.cpp:703</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_af538071d5478f764a4782d39481ad5c6"><div class="ttname"><a href="structIPCMSGSTRUCT.html#af538071d5478f764a4782d39481ad5c6">IPCMSGSTRUCT::pdoid</a></div><div class="ttdeci">long pdoid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00414">rlcanopentypes.h:414</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aed25748dde8a23b3527427ecf7d3f2e2"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aed25748dde8a23b3527427ecf7d3f2e2">IPCMSGSTRUCT::mappingid</a></div><div class="ttdeci">long mappingid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00415">rlcanopentypes.h:415</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_af59141fc2073831833333cd48214d878"><div class="ttname"><a href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">rlCanOpenTypes::createIpcMsg</a></div><div class="ttdeci">IPCMSGSTRUCT createIpcMsg()</div><div class="ttdoc">returns a IPCMSGSTRUCT filled with current object data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00451">rlcanopentypes.cpp:451</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac49104ffe6f20c359102f1912dddc2fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49104ffe6f20c359102f1912dddc2fe">&#9670;&nbsp;</a></span>restart_board()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restart_board </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a restartBoard command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00134">134</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                          {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">char</span> returnvalue;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    returnvalue=_daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#ac65b49a7d5677c354cd73c6980687219">restartBoard</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                (<span class="keywordtype">int</span>) _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a85d3f9a8ebeece22a414750acb5906d6">mtext</a>[0]);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=returnvalue;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1afedc0e794922c328a0156660e781f7c0">MSG_PDO_TRANSMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00037">rlcanopendaemon.h:37</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a85d3f9a8ebeece22a414750acb5906d6"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a85d3f9a8ebeece22a414750acb5906d6">IPCMSGSTRUCT::mtext</a></div><div class="ttdeci">char mtext[247]</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00417">rlcanopentypes.h:417</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="classrlCanOpen_html_ac65b49a7d5677c354cd73c6980687219"><div class="ttname"><a href="classrlCanOpen.html#ac65b49a7d5677c354cd73c6980687219">rlCanOpen::restartBoard</a></div><div class="ttdeci">int restartBoard(int _boardnr, int _restarttype)</div><div class="ttdoc">using this function you are able to restart a CanOpenMaster board </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l01114">rlcanopen.cpp:1114</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51ba1765537b52ff4795f6ef0424c690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51ba1765537b52ff4795f6ef0424c690">&#9670;&nbsp;</a></span>sdo_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sdo_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a sdo_read command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00021">21</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                     {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713">sdo_read</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a1205d3341828bba91a988a38c6f98790">objectindex</a>, </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a84008b9e507ab525216cf0b0af900eed">subindex</a>, cifmsg);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  *_message = cifmsg.<a class="code" href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">createIpcMsg</a>();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613">MSG_SDO_READ</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2">MSG_RECEIVE</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a84008b9e507ab525216cf0b0af900eed"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a84008b9e507ab525216cf0b0af900eed">IPCMSGSTRUCT::subindex</a></div><div class="ttdeci">long subindex</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00413">rlcanopentypes.h:413</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="classrlCanOpen_html_a0a0e5e4328ff82cc5a7de3e8fa9c9713"><div class="ttname"><a href="classrlCanOpen.html#a0a0e5e4328ff82cc5a7de3e8fa9c9713">rlCanOpen::sdo_read</a></div><div class="ttdeci">int sdo_read(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)</div><div class="ttdoc">read a certain object from the object dictionary of a node </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l00332">rlcanopen.cpp:332</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a08c61a4cef5241dfb8d394e2c4889613">MSG_SDO_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00032">rlcanopendaemon.h:32</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_af59141fc2073831833333cd48214d878"><div class="ttname"><a href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">rlCanOpenTypes::createIpcMsg</a></div><div class="ttdeci">IPCMSGSTRUCT createIpcMsg()</div><div class="ttdoc">returns a IPCMSGSTRUCT filled with current object data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00451">rlcanopentypes.cpp:451</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a1205d3341828bba91a988a38c6f98790"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a1205d3341828bba91a988a38c6f98790">IPCMSGSTRUCT::objectindex</a></div><div class="ttdeci">long objectindex</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00412">rlcanopentypes.h:412</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2">MSG_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00031">rlcanopendaemon.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addf026270ccb455ee80506d5126ca7a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addf026270ccb455ee80506d5126ca7a9">&#9670;&nbsp;</a></span>sdo_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sdo_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classrlCanOpenDaemon.html">rlCanOpenDaemon</a> *&#160;</td>
          <td class="paramname"><em>_daemonptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classrlSocket.html">rlSocket</a> *&#160;</td>
          <td class="paramname"><em>_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structIPCMSGSTRUCT.html">IPCMSGSTRUCT</a> *&#160;</td>
          <td class="paramname"><em>_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>gets called from clientconnection thread. performs a sdo_write command on the canopen interface. received data is stored in an <a class="el" href="structIPCMSGSTRUCT.html" title="the IPCMSGSTRUCT is the transfer buffer which is send trough TCP sockets ">IPCMSGSTRUCT</a> and sent back to the clientprocess </p>

<p class="definition">Definition at line <a class="el" href="rlcanopendaemon_8cpp_source.html#l00039">39</a> of file <a class="el" href="rlcanopendaemon_8cpp_source.html">rlcanopendaemon.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                      {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classrlCanOpenTypes.html">rlCanOpenTypes</a> cifmsg;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  cifmsg.<a class="code" href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">getIpcMsg</a>(*_message);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">lock</a>();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">nodes</a>-&gt;<a class="code" href="classrlCanOpen.html#afe214122e51cdd214d586ef1b50a5b34">sdo_write</a>(_message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">boardid</a>, </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                 _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">nodeid</a>, </div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                 _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a1205d3341828bba91a988a38c6f98790">objectindex</a>, </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                 _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a84008b9e507ab525216cf0b0af900eed">subindex</a>, cifmsg);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  _daemonptr-&gt;<a class="code" href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">daemon_thread</a>.<a class="code" href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">unlock</a>();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  *_message = cifmsg.<a class="code" href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">createIpcMsg</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">msgtype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730">MSG_SDO_WRITE</a>; _message-&gt;<a class="code" href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">transfertype</a>=<a class="code" href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2">MSG_RECEIVE</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  _socket-&gt;<a class="code" href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">write</a>((<span class="keywordtype">void</span>*) _message, <span class="keyword">sizeof</span>(*_message));   </div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="classrlCanOpenDaemon_html_a0ba207ed336015b1ec56340aa1ffebce"><div class="ttname"><a href="classrlCanOpenDaemon.html#a0ba207ed336015b1ec56340aa1ffebce">rlCanOpenDaemon::daemon_thread</a></div><div class="ttdeci">rlThread daemon_thread</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00081">rlcanopendaemon.h:81</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a84008b9e507ab525216cf0b0af900eed"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a84008b9e507ab525216cf0b0af900eed">IPCMSGSTRUCT::subindex</a></div><div class="ttdeci">long subindex</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00413">rlcanopentypes.h:413</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_aeabf16c705c41f39549f37b1341fcd40"><div class="ttname"><a href="structIPCMSGSTRUCT.html#aeabf16c705c41f39549f37b1341fcd40">IPCMSGSTRUCT::transfertype</a></div><div class="ttdeci">long transfertype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00407">rlcanopentypes.h:407</a></div></div>
<div class="ttc" id="classrlSocket_html_aa069e328b2509cbbc15bf9c91684b6be"><div class="ttname"><a href="classrlSocket.html#aa069e328b2509cbbc15bf9c91684b6be">rlSocket::write</a></div><div class="ttdeci">int write(const void *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="rlsocket_8cpp_source.html#l00292">rlsocket.cpp:292</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a4c97b4f1dbf03de0358f3bc45ba527a0"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a4c97b4f1dbf03de0358f3bc45ba527a0">IPCMSGSTRUCT::msgtype</a></div><div class="ttdeci">long msgtype</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00402">rlcanopentypes.h:402</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_a9f3e044c60558bd0de010434241c9824"><div class="ttname"><a href="classrlCanOpenTypes.html#a9f3e044c60558bd0de010434241c9824">rlCanOpenTypes::getIpcMsg</a></div><div class="ttdeci">void getIpcMsg(IPCMSGSTRUCT _myIpcMsg)</div><div class="ttdoc">overwrites all data with IPCMSGSTRUCT data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00471">rlcanopentypes.cpp:471</a></div></div>
<div class="ttc" id="classrlThread_html_ab52388712ba58b879ea1f0ceca547ad3"><div class="ttname"><a href="classrlThread.html#ab52388712ba58b879ea1f0ceca547ad3">rlThread::unlock</a></div><div class="ttdeci">int unlock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00052">rlthread.cpp:52</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html"><div class="ttname"><a href="classrlCanOpenTypes.html">rlCanOpenTypes</a></div><div class="ttdoc">class to handle CANopen types </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00038">rlcanopentypes.h:38</a></div></div>
<div class="ttc" id="classrlCanOpenDaemon_html_ad32a3078d59a83504a752ced7bf9642c"><div class="ttname"><a href="classrlCanOpenDaemon.html#ad32a3078d59a83504a752ced7bf9642c">rlCanOpenDaemon::nodes</a></div><div class="ttdeci">rlCanOpen * nodes</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00076">rlcanopendaemon.h:76</a></div></div>
<div class="ttc" id="classrlCanOpen_html_afe214122e51cdd214d586ef1b50a5b34"><div class="ttname"><a href="classrlCanOpen.html#afe214122e51cdd214d586ef1b50a5b34">rlCanOpen::sdo_write</a></div><div class="ttdeci">int sdo_write(int _boardnr, int _nodeid, int _objectindex, int _subindex, rlCanOpenTypes &amp;_sdo_data)</div><div class="ttdoc">write data into a certain object from the object dictionary of a node </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopen_8cpp_source.html#l00431">rlcanopen.cpp:431</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a39ace9ec46bece3742400a7c02854730">MSG_SDO_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00033">rlcanopendaemon.h:33</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a3e9d17de9492c78203c3ca6881faf6ab"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a3e9d17de9492c78203c3ca6881faf6ab">IPCMSGSTRUCT::boardid</a></div><div class="ttdeci">long boardid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00410">rlcanopentypes.h:410</a></div></div>
<div class="ttc" id="classrlCanOpenTypes_html_af59141fc2073831833333cd48214d878"><div class="ttname"><a href="classrlCanOpenTypes.html#af59141fc2073831833333cd48214d878">rlCanOpenTypes::createIpcMsg</a></div><div class="ttdeci">IPCMSGSTRUCT createIpcMsg()</div><div class="ttdoc">returns a IPCMSGSTRUCT filled with current object data </div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8cpp_source.html#l00451">rlcanopentypes.cpp:451</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a1205d3341828bba91a988a38c6f98790"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a1205d3341828bba91a988a38c6f98790">IPCMSGSTRUCT::objectindex</a></div><div class="ttdeci">long objectindex</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00412">rlcanopentypes.h:412</a></div></div>
<div class="ttc" id="classrlThread_html_a543d60a27fdd4362af6a859049e19f52"><div class="ttname"><a href="classrlThread.html#a543d60a27fdd4362af6a859049e19f52">rlThread::lock</a></div><div class="ttdeci">int lock()</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00047">rlthread.cpp:47</a></div></div>
<div class="ttc" id="structIPCMSGSTRUCT_html_a2acd50bbd96927117ea43f82e1fa8705"><div class="ttname"><a href="structIPCMSGSTRUCT.html#a2acd50bbd96927117ea43f82e1fa8705">IPCMSGSTRUCT::nodeid</a></div><div class="ttdeci">long nodeid</div><div class="ttdef"><b>Definition:</b> <a href="rlcanopentypes_8h_source.html#l00411">rlcanopentypes.h:411</a></div></div>
<div class="ttc" id="rlcanopendaemon_8h_html_a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2"><div class="ttname"><a href="rlcanopendaemon_8h.html#a84e97603720411166b6a7abf45a409f1a9a8b8c70e5e50e70a1dd8edfacea4da2">MSG_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="rlcanopendaemon_8h_source.html#l00031">rlcanopendaemon.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
