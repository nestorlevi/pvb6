<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rllib: rlState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rllib
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classrlState-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rlState Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="rlstate_8h_source.html">rlstate.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for rlState:</div>
<div class="dyncontent">
<div class="center"><img src="classrlState__coll__graph.png" border="0" usemap="#rlState_coll__map" alt="Collaboration graph"/></div>
<map name="rlState_coll__map" id="rlState_coll__map">
<area shape="rect" id="node2" href="classrlThread.html" title="rlThread" alt="" coords="85,184,160,211"/>
<area shape="rect" id="node3" href="structTHREAD__PARAM.html" title="THREAD_PARAM" alt="" coords="117,273,248,300"/>
<area shape="rect" id="node4" href="structWSEMAPHORE.html" title="WSEMAPHORE" alt="" coords="5,95,123,121"/>
<area shape="rect" id="node5" href="structpthread__attr__t.html" title="pthread_attr_t" alt="" coords="147,95,250,121"/>
<area shape="rect" id="node6" href="struct____sched__param.html" title="__sched_param" alt="" coords="139,5,258,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1b8f80b72c657d463c6fd1da9bc96b0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a1b8f80b72c657d463c6fd1da9bc96b0d">rlState</a> ()</td></tr>
<tr class="separator:a1b8f80b72c657d463c6fd1da9bc96b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475a08e2c43485c6de32032d2cdac684"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a475a08e2c43485c6de32032d2cdac684">~rlState</a> ()</td></tr>
<tr class="separator:a475a08e2c43485c6de32032d2cdac684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe2c0f67f325c4c6a309823cc626b05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#aabe2c0f67f325c4c6a309823cc626b05">startSteps</a> (int <a class="el" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a>)</td></tr>
<tr class="separator:aabe2c0f67f325c4c6a309823cc626b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b1a3130c654fc9fe3c5ce05871432a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a26b1a3130c654fc9fe3c5ce05871432a">runSteps</a> (int <a class="el" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a>)</td></tr>
<tr class="separator:a26b1a3130c654fc9fe3c5ce05871432a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69a491cc0d9395061772be2f2c4e333"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#ac69a491cc0d9395061772be2f2c4e333">gotoState</a> (void(*funcPtr)(<a class="el" href="classrlState.html">rlState</a> *sm))</td></tr>
<tr class="separator:ac69a491cc0d9395061772be2f2c4e333"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afcdaaea34be6204c1ca66a0cb2d484b2"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#afcdaaea34be6204c1ca66a0cb2d484b2">user</a></td></tr>
<tr class="separator:afcdaaea34be6204c1ca66a0cb2d484b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a773939729eede6d342d0e1ad22596719"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a></td></tr>
<tr class="separator:a773939729eede6d342d0e1ad22596719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf908eee39e963fde45ee3be64bfa20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a></td></tr>
<tr class="separator:a8bf908eee39e963fde45ee3be64bfa20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96851c6ea20e83e656e7045ade9db270"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">nextStep</a> )(<a class="el" href="classrlState.html">rlState</a> *sm)</td></tr>
<tr class="separator:a96851c6ea20e83e656e7045ade9db270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939447d367116085ddfa1556fbe4ebf5"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">lastState</a> )(<a class="el" href="classrlState.html">rlState</a> *sm)</td></tr>
<tr class="separator:a939447d367116085ddfa1556fbe4ebf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138b9b3bd514a954b4da373d7e0a9cc5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrlThread.html">rlThread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#a138b9b3bd514a954b4da373d7e0a9cc5">thread</a></td></tr>
<tr class="separator:a138b9b3bd514a954b4da373d7e0a9cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ac49e2bf81051189d673577835cd952ef"><td class="memItemLeft" align="right" valign="top">static const long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrlState.html#ac49e2bf81051189d673577835cd952ef">MAX_STEP</a> = 1000*1000*1000</td></tr>
<tr class="separator:ac49e2bf81051189d673577835cd952ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre>
This class is used to implement a statemachine.</pre><pre>Under pvbaddon/templates/statemachine/plc you find the statemachine consisting of several threads.
The main thread will read/write a Modbus PLC.
The statemachine stm2 will handle a small demo statemachine.
The statemachine stm1 will start stm2 if the user selects this function.</pre><pre>The data will be stored in a shared memory.
The shared memory contains a complex datastructure (typedef struct {...} USER_DEFINED_STRUCTURE;) which can be used to exchange values between several processes.</pre><pre>The pvbrowser visualization server is located under pvbaddon/templates/statemachine/pvs
There we use a SVG graphic (stm2.svg) showing the statemachine.
This graphic is generated by graphviz from stm2.dot
pvs and plc exchange data only via shared memory.</pre><pre>Please start both (plc and pvs) in a separate terminal and then start the pvbrowser client</pre><pre>Here is some sourcecode from the template:
// ***************************************************************************
//                          main.cpp  -  description
//                             ----------------&mdash;
//  begin            : Sa. Mai 4 09:29:07 2013
//  generated by     : pvdevelop (C) Lehrig Software Engineering
//  email            : <a href="#" onclick="location.href='mai'+'lto:'+'leh'+'ri'+'g@t'+'-o'+'nli'+'ne'+'.de'; return false;">lehri<span style="display: none;">.nosp@m.</span>g@t-<span style="display: none;">.nosp@m.</span>onlin<span style="display: none;">.nosp@m.</span>e.de</a>
// ***************************************************************************
#include "plcapp.h"</pre><pre>SHM_DATA      *shm_data;
<a class="el" href="classrlSharedMemory.html">rlSharedMemory</a> shm("/srv/automation/shm/plc.shm", sizeof(SHM_DATA));
<a class="el" href="classrlSerial.html">rlSerial</a>       tty;
<a class="el" href="classrlModbus.html">rlModbus</a>       mb;
<a class="el" href="classrlMutex.html">rlMutex</a>        mb_mutex;
<a class="el" href="classrlState.html">rlState</a>        sm1, sm2;</pre><pre>//// helper functions
int printBinByte(unsigned char val)
{
  if(val &amp; BIT7) printf("1");
  else           printf("0");
  if(val &amp; BIT6) printf("1");
  else           printf("0");
  if(val &amp; BIT5) printf("1");
  else           printf("0");
  if(val &amp; BIT4) printf("1");
  else           printf("0");
  printf(":");
  if(val &amp; BIT3) printf("1");
  else           printf("0");
  if(val &amp; BIT2) printf("1");
  else           printf("0");
  if(val &amp; BIT1) printf("1");
  else           printf("0");
  if(val &amp; BIT0) printf("1");
  else           printf("0");
  return 0;
}</pre><pre>int printBin(unsigned char *data)
{
  printf("BinData: ");
  printBinByte(data[0]);
  printf(" - ");
  printBinByte(data[1]);
  return 0;
}</pre><pre>//// Schneider PLC: first 4 bits are outputs then 6 bits input follow
static int readIO() 
{
  unsigned char data[256];
  int ret;</pre><pre>  MB_readInputStatus(1,0,10,data);          // read all IO values from modbus
  shm_data-&gt;plc.in.in1 = mb.data2int(data); // store data in shared memory</pre><pre>  if(trace)
  {
    printf("readIO:: ret=%d ", ret); 
    printBin(data);
    printf(" in1=%x\n", shm_data-&gt;plc.in.in1);
  }  
<br />
  return 0;
}</pre><pre>static int writeIO()
{
  unsigned char coils[8];
  int ret;</pre><pre>  coils[0] = shm_data-&gt;plc.out.out1 &amp; 0x0ff;
  MB_forceMultipleCoils(1,0,4,coils);       // write the 4 output bits to modbus</pre><pre>  return 0;
}</pre><pre>int <a class="el" href="rlcorba_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main()</a>
{
  if(trace) printf("plc starting ...\n");
  if(trace) printf("shm.status=%d\n", shm.status);
  if(shm.status != <a class="el" href="classrlSharedMemory.html#aa1375e00b92e5a7567a23bdfdb036ae8a7cb8ffc76ae98203b312b406504bcebb">rlSharedMemory::OK</a>)
  {
    printf("ERROR: shared memory status is not ok\n");
    return -1;
  }
  shm_data = (SHM_DATA *) shm.getUserAdr();
  memset(shm_data,0,sizeof(SHM_DATA));
  if(tty.openDevice("/dev/ttyUSB0",B9600,1,1,8,1,<a class="el" href="classrlSerial.html#ae705e4dac522e9af64f656dc89495b05ab95591eec0d17e4ed7d42f0addbce81e">rlSerial::NONE</a>) &lt; 0)
  {
    printf("ERROR: openDevice(\"/dev/tty/USB0")<br />
");
  }
  mb.registerSerial(&amp;tty);</pre><pre>  startStepsStm1(&amp;sm1, 100); // start statemachine 1
  startStepsStm2(&amp;sm2, 100); // start statemachine 2
  printf("going to IO loop\n");
  while(1)
  {
    readIO();
    writeIO();
    rlsleep(10);
  }
  return 0;
}</pre><pre>// *****************************************************************************
//                          stm2.cpp  -  description
//                             ----------------&mdash;
//  begin            : Sa. Mai 4 09:29:07 2013
//  generated by     : pvdevelop (C) Lehrig Software Engineering
//  email            : <a href="#" onclick="location.href='mai'+'lto:'+'leh'+'ri'+'g@t'+'-o'+'nli'+'ne'+'.de'; return false;">lehri<span style="display: none;">.nosp@m.</span>g@t-<span style="display: none;">.nosp@m.</span>onlin<span style="display: none;">.nosp@m.</span>e.de</a>
//                     A simple template for implementing your own statemachine
//                     See: pvbaddon/templates/statemachine
// *****************************************************************************
#include "plcapp.h"</pre><pre>////TODO: define our states
////      Your states are defined by static functions which get a pointer to the statemachine
////      The pointer sm-&gt;user might be used to transfer the address of a user defined datastructure
////      A transition from one state to the next is done by sm-&gt;gotoState(theNextState);
////      Your statemachine runs within a separate thread and the current state is called within "cycletime" intervals
static void stStart(rlState *sm);
static void stProcess(rlState *sm);
static void stFinish(rlState *sm);</pre><pre>////TODO: implement our states
static void stStart(rlState *sm)
{
  shm_data-&gt;plc.out.out1 = 1;                        // set output 1 in shared memory
  if(sm-&gt;stepCounter &gt; 20) 
  {
    shm_data-&gt;plc.out.out1 = 2;                      // reset output 1 in shared memory
    strcpy(shm_data-&gt;plc.state.stm2_name,"Process"); // set next state name in shared memory 
    sm-&gt;gotoState(stProcess);                        // goto the next state
  }  
<br />
}</pre><pre>static void stProcess(rlState *sm)
{
  shm_data-&gt;plc.out.out1 = sm-&gt;stepCounter;          // set output 1 in shared memory
  if(sm-&gt;stepCounter &gt; 30) 
  {
    strcpy(shm_data-&gt;plc.state.stm2_name,"Finish");  // set next state name in shared memory
    sm-&gt;gotoState(stFinish);                         // goto the next state
  }  
<br />
}</pre><pre>static void stFinish(rlState *sm)
{
  shm_data-&gt;plc.out.out1 = 1;                        // set output 1 in shared memory
  if(sm-&gt;stepCounter &gt; 30) 
  {
    shm_data-&gt;plc.out.out1 = 0;                      // reset output 1 in shared memory
    strcpy(shm_data-&gt;plc.state.stm2_name,"NULL");    // set next state name NULL
    shm_data-&gt;plc.state.stm2_running = 0;            // reset running in shared memory 
    sm-&gt;gotoState(NULL);                             // goto NULL state
  }  
<br />
}</pre><pre>int startStepsStm2(rlState *sm, int cycletime)       // start our statemachine
{
  if(trace) printf("stm2 starting\n");
  shm_data-&gt;plc.state.stm2_running = 1;              // set running in shared memory
  strcpy(shm_data-&gt;plc.state.stm2_name,"Start");     // set next state name in shared memory
  sm-&gt;gotoState(stStart);                            // goto nextState
  sm-&gt;startSteps(cycletime);                         // start a thread which handles the statemachine
  return 0;
}</pre><pre>// ***************************************************************************
//                          stm1.cpp  -  description
//                             ----------------&mdash;
//  begin            : Sa. Mai 4 09:29:07 2013
//  generated by     : pvdevelop (C) Lehrig Software Engineering
//  email            : <a href="#" onclick="location.href='mai'+'lto:'+'leh'+'ri'+'g@t'+'-o'+'nli'+'ne'+'.de'; return false;">lehri<span style="display: none;">.nosp@m.</span>g@t-<span style="display: none;">.nosp@m.</span>onlin<span style="display: none;">.nosp@m.</span>e.de</a>
// ***************************************************************************
#include "plcapp.h"
extern <a class="el" href="classrlState.html">rlState</a> sm2;</pre><pre>////TODO: define our states
static void stStart(rlState *sm);</pre><pre>////TODO: implement our states
static void stStart(rlState *sm)
{
  shm_data-&gt;plc.out.out2 = sm-&gt;stepCounter;
  if(shm_data-&gt;plc.state.stm2_running == 0)
  {
    if(shm_data-&gt;pvs.state.button_start_stm2 == 1)
    {
      startStepsStm2(&amp;sm2, 100);               // start statemachine 2 thread
    }
    else if(shm_data-&gt;plc.in.in1 &amp; BIT1)
    {
      startStepsStm2(&amp;sm2, 100);               // start statemachine 2 thread
    }
  }  
<br />
}</pre><pre>int startStepsStm1(rlState *sm, int cycletime) // start our statemachine
{
  if(trace) printf("Start stm1\n");
  shm_data-&gt;plc.state.stm1_running = 1;        // set running within shared memory
  sm-&gt;gotoState(stStart);                      // goto nextState
  sm-&gt;startSteps(cycletime);                   // start a thread that will handle our statemachine
  return 0;
}</pre><pre></pre> 
<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00256">256</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1b8f80b72c657d463c6fd1da9bc96b0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b8f80b72c657d463c6fd1da9bc96b0d">&#9670;&nbsp;</a></span>rlState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlState::rlState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8cpp_source.html#l00018">18</a> of file <a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  <a class="code" href="classrlState.html#afcdaaea34be6204c1ca66a0cb2d484b2">user</a> = NULL;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  <a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a> = -1;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <a class="code" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a> = 1000;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <a class="code" href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">nextStep</a> = NULL;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">lastState</a> = NULL;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div><div class="ttc" id="classrlState_html_afcdaaea34be6204c1ca66a0cb2d484b2"><div class="ttname"><a href="classrlState.html#afcdaaea34be6204c1ca66a0cb2d484b2">rlState::user</a></div><div class="ttdeci">void * user</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00264">rlstate.h:264</a></div></div>
<div class="ttc" id="classrlState_html_a8bf908eee39e963fde45ee3be64bfa20"><div class="ttname"><a href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">rlState::cycletime</a></div><div class="ttdeci">int cycletime</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00266">rlstate.h:266</a></div></div>
<div class="ttc" id="classrlState_html_a939447d367116085ddfa1556fbe4ebf5"><div class="ttname"><a href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">rlState::lastState</a></div><div class="ttdeci">void(* lastState)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00269">rlstate.h:269</a></div></div>
<div class="ttc" id="classrlState_html_a773939729eede6d342d0e1ad22596719"><div class="ttname"><a href="classrlState.html#a773939729eede6d342d0e1ad22596719">rlState::stepCounter</a></div><div class="ttdeci">int stepCounter</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00265">rlstate.h:265</a></div></div>
<div class="ttc" id="classrlState_html_a96851c6ea20e83e656e7045ade9db270"><div class="ttname"><a href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">rlState::nextStep</a></div><div class="ttdeci">void(* nextStep)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00268">rlstate.h:268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a475a08e2c43485c6de32032d2cdac684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475a08e2c43485c6de32032d2cdac684">&#9670;&nbsp;</a></span>~rlState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rlState::~rlState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8cpp_source.html#l00027">27</a> of file <a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac69a491cc0d9395061772be2f2c4e333"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac69a491cc0d9395061772be2f2c4e333">&#9670;&nbsp;</a></span>gotoState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rlState::gotoState </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="classrlState.html">rlState</a> *sm)&#160;</td>
          <td class="paramname"><em>funcPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8cpp_source.html#l00031">31</a> of file <a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a> = -1;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">lastState</a> = <a class="code" href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">nextStep</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">nextStep</a> = funcPtr;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div><div class="ttc" id="classrlState_html_a939447d367116085ddfa1556fbe4ebf5"><div class="ttname"><a href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">rlState::lastState</a></div><div class="ttdeci">void(* lastState)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00269">rlstate.h:269</a></div></div>
<div class="ttc" id="classrlState_html_a773939729eede6d342d0e1ad22596719"><div class="ttname"><a href="classrlState.html#a773939729eede6d342d0e1ad22596719">rlState::stepCounter</a></div><div class="ttdeci">int stepCounter</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00265">rlstate.h:265</a></div></div>
<div class="ttc" id="classrlState_html_a96851c6ea20e83e656e7045ade9db270"><div class="ttname"><a href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">rlState::nextStep</a></div><div class="ttdeci">void(* nextStep)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00268">rlstate.h:268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26b1a3130c654fc9fe3c5ce05871432a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b1a3130c654fc9fe3c5ce05871432a">&#9670;&nbsp;</a></span>runSteps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlState::runSteps </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cycletime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8cpp_source.html#l00038">38</a> of file <a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a> = _cycletime;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">lastState</a> = NULL;;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a> = 0;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  </div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">nextStep</a> != NULL)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    (*nextStep)(<span class="keyword">this</span>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a>(<a class="code" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a>++;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a> &gt; <a class="code" href="classrlState.html#ac49e2bf81051189d673577835cd952ef">MAX_STEP</a>) <a class="code" href="classrlState.html#a773939729eede6d342d0e1ad22596719">stepCounter</a> = 1;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="classrlState_html_a8bf908eee39e963fde45ee3be64bfa20"><div class="ttname"><a href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">rlState::cycletime</a></div><div class="ttdeci">int cycletime</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00266">rlstate.h:266</a></div></div>
<div class="ttc" id="classrlState_html_a939447d367116085ddfa1556fbe4ebf5"><div class="ttname"><a href="classrlState.html#a939447d367116085ddfa1556fbe4ebf5">rlState::lastState</a></div><div class="ttdeci">void(* lastState)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00269">rlstate.h:269</a></div></div>
<div class="ttc" id="rlwthread_8cpp_html_a604b0dba29427e3514cd37136458e0c5"><div class="ttname"><a href="rlwthread_8cpp.html#a604b0dba29427e3514cd37136458e0c5">rlsleep</a></div><div class="ttdeci">void rlsleep(long msec)</div><div class="ttdef"><b>Definition:</b> <a href="rlwthread_8cpp_source.html#l00396">rlwthread.cpp:396</a></div></div>
<div class="ttc" id="classrlState_html_a773939729eede6d342d0e1ad22596719"><div class="ttname"><a href="classrlState.html#a773939729eede6d342d0e1ad22596719">rlState::stepCounter</a></div><div class="ttdeci">int stepCounter</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00265">rlstate.h:265</a></div></div>
<div class="ttc" id="classrlState_html_ac49e2bf81051189d673577835cd952ef"><div class="ttname"><a href="classrlState.html#ac49e2bf81051189d673577835cd952ef">rlState::MAX_STEP</a></div><div class="ttdeci">static const long MAX_STEP</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00267">rlstate.h:267</a></div></div>
<div class="ttc" id="classrlState_html_a96851c6ea20e83e656e7045ade9db270"><div class="ttname"><a href="classrlState.html#a96851c6ea20e83e656e7045ade9db270">rlState::nextStep</a></div><div class="ttdeci">void(* nextStep)(rlState *sm)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00268">rlstate.h:268</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aabe2c0f67f325c4c6a309823cc626b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe2c0f67f325c4c6a309823cc626b05">&#9670;&nbsp;</a></span>startSteps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlState::startSteps </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cycletime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8cpp_source.html#l00064">64</a> of file <a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a> &lt; 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">cycletime</a> = _cycletime;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classrlState.html#a138b9b3bd514a954b4da373d7e0a9cc5">thread</a>.<a class="code" href="classrlThread.html#a2e26bec1d1bc3bc35a3c8a1c9930f2fb">create</a>(<a class="code" href="rlstate_8cpp.html#ab4c9f4bf55f0b58929dc3fa7b3d7fb4b">stepsThread</a>,<span class="keyword">this</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div><div class="ttc" id="classrlThread_html_a2e26bec1d1bc3bc35a3c8a1c9930f2fb"><div class="ttname"><a href="classrlThread.html#a2e26bec1d1bc3bc35a3c8a1c9930f2fb">rlThread::create</a></div><div class="ttdeci">int create(void *(*func)(void *), void *argument)</div><div class="ttdef"><b>Definition:</b> <a href="rlthread_8cpp_source.html#l00035">rlthread.cpp:35</a></div></div>
<div class="ttc" id="classrlState_html_a8bf908eee39e963fde45ee3be64bfa20"><div class="ttname"><a href="classrlState.html#a8bf908eee39e963fde45ee3be64bfa20">rlState::cycletime</a></div><div class="ttdeci">int cycletime</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00266">rlstate.h:266</a></div></div>
<div class="ttc" id="classrlState_html_a138b9b3bd514a954b4da373d7e0a9cc5"><div class="ttname"><a href="classrlState.html#a138b9b3bd514a954b4da373d7e0a9cc5">rlState::thread</a></div><div class="ttdeci">rlThread thread</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8h_source.html#l00270">rlstate.h:270</a></div></div>
<div class="ttc" id="rlstate_8cpp_html_ab4c9f4bf55f0b58929dc3fa7b3d7fb4b"><div class="ttname"><a href="rlstate_8cpp.html#ab4c9f4bf55f0b58929dc3fa7b3d7fb4b">stepsThread</a></div><div class="ttdeci">static void * stepsThread(void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="rlstate_8cpp_source.html#l00055">rlstate.cpp:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8bf908eee39e963fde45ee3be64bfa20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bf908eee39e963fde45ee3be64bfa20">&#9670;&nbsp;</a></span>cycletime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlState::cycletime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00266">266</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="a939447d367116085ddfa1556fbe4ebf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939447d367116085ddfa1556fbe4ebf5">&#9670;&nbsp;</a></span>lastState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rlState::lastState) (<a class="el" href="classrlState.html">rlState</a> *sm)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00269">269</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="ac49e2bf81051189d673577835cd952ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49e2bf81051189d673577835cd952ef">&#9670;&nbsp;</a></span>MAX_STEP</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const long rlState::MAX_STEP = 1000*1000*1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00267">267</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="a96851c6ea20e83e656e7045ade9db270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96851c6ea20e83e656e7045ade9db270">&#9670;&nbsp;</a></span>nextStep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rlState::nextStep) (<a class="el" href="classrlState.html">rlState</a> *sm)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00268">268</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="a773939729eede6d342d0e1ad22596719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a773939729eede6d342d0e1ad22596719">&#9670;&nbsp;</a></span>stepCounter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rlState::stepCounter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00265">265</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="a138b9b3bd514a954b4da373d7e0a9cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a138b9b3bd514a954b4da373d7e0a9cc5">&#9670;&nbsp;</a></span>thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrlThread.html">rlThread</a> rlState::thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00270">270</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<a id="afcdaaea34be6204c1ca66a0cb2d484b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdaaea34be6204c1ca66a0cb2d484b2">&#9670;&nbsp;</a></span>user</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* rlState::user</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="rlstate_8h_source.html#l00264">264</a> of file <a class="el" href="rlstate_8h_source.html">rlstate.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rlstate_8h_source.html">rlstate.h</a></li>
<li><a class="el" href="rlstate_8cpp_source.html">rlstate.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
